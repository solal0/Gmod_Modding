<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Opener Check</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: #fff;
        display:flex;
        justify-content:center;
        align-items:center;
        height:100vh;
        text-align:center;
    }
    #output { font-size:24px; }
</style>
</head>
<body>
<div id="output">Checking...</div>

<script>
const output = document.getElementById("output");

// Method 1: document.referrer
let referrer = document.referrer || "";

// Method 2: window.opener location (only works if same origin)
let openerUrl = "";
try {
    if(window.opener && !window.opener.closed) {
        openerUrl = window.opener.location.href;
    }
} catch(e) {
    openerUrl = "";
}

// Method 3: URL parameters fallback
const urlParams = new URLSearchParams(window.location.search);
const paramSource = urlParams.get("source") || "";

// Decide which one to use
let detected = "";
if(referrer) detected = referrer;
else if(openerUrl) detected = openerUrl;
else if(paramSource) detected = paramSource;
else detected = null;

// Display result
if(detected) {
    output.textContent = "I think you came from: " + detected;
} else {
    output.textContent = "404 - Source unknown";
}
</script>
</body>
</html>
